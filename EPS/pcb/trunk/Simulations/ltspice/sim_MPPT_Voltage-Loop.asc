Version 4
SHEET 1 3288 1452
WIRE 1712 -528 1616 -528
WIRE 1808 -528 1776 -528
WIRE 1888 -528 1808 -528
WIRE 2032 -528 1888 -528
WIRE 2176 -528 2032 -528
WIRE 1616 -496 1616 -528
WIRE 992 -448 544 -448
WIRE 2032 -432 2032 -448
WIRE 2176 -416 2176 -448
WIRE 1616 -400 1616 -416
WIRE 2304 -400 2224 -400
WIRE 2224 -336 2224 -352
WIRE 2224 -336 2176 -336
WIRE 2176 -320 2176 -336
WIRE 608 -256 608 -304
WIRE 1232 -256 1136 -256
WIRE 1456 -256 1312 -256
WIRE 1504 -256 1456 -256
WIRE 1712 -256 1664 -256
WIRE 1808 -256 1808 -528
WIRE 1808 -256 1776 -256
WIRE 544 -240 544 -448
WIRE 576 -240 544 -240
WIRE 720 -224 640 -224
WIRE 816 -224 720 -224
WIRE 912 -224 816 -224
WIRE 1136 -224 1136 -256
WIRE 576 -208 528 -208
WIRE 816 -208 816 -224
WIRE 912 -208 912 -224
WIRE 1504 -208 1472 -208
WIRE 1472 -160 1472 -208
WIRE 816 -112 816 -128
WIRE 864 -112 816 -112
WIRE 912 -112 912 -128
WIRE 912 -112 864 -112
WIRE 864 -96 864 -112
WIRE 528 16 528 -208
WIRE 672 16 528 16
WIRE 704 16 672 16
WIRE 864 16 864 -16
WIRE 864 16 784 16
WIRE 992 16 992 -448
WIRE 992 16 864 16
WIRE 1712 16 992 16
WIRE 2640 16 1792 16
WIRE 672 48 672 16
WIRE 864 48 864 16
WIRE 2320 224 2208 224
WIRE 2464 224 2384 224
WIRE 1040 336 992 336
WIRE 1104 336 1040 336
WIRE 1248 336 1184 336
WIRE 1440 336 1408 336
WIRE 1456 336 1440 336
WIRE 2096 368 2080 368
WIRE 2208 368 2208 224
WIRE 2208 368 2176 368
WIRE 2240 368 2208 368
WIRE 1248 384 1232 384
WIRE 880 400 624 400
WIRE 992 400 992 336
WIRE 992 400 880 400
WIRE 2464 400 2464 224
WIRE 2464 400 2384 400
WIRE 2640 400 2640 16
WIRE 2640 400 2464 400
WIRE 624 416 624 400
WIRE 1232 416 1232 384
WIRE 1456 432 1456 416
WIRE 2240 432 1952 432
WIRE 880 480 880 400
WIRE 992 480 992 400
WIRE 2080 496 2080 368
WIRE 1696 512 1632 512
WIRE 1824 512 1760 512
WIRE 768 592 640 592
WIRE 880 592 880 560
WIRE 880 592 768 592
WIRE 880 608 880 592
WIRE 992 624 992 560
WIRE 1088 624 992 624
WIRE 1232 624 1088 624
WIRE 1264 624 1232 624
WIRE 1376 624 1344 624
WIRE 1632 624 1632 512
WIRE 1632 624 1376 624
WIRE 1680 624 1632 624
WIRE 1824 624 1824 512
WIRE 1824 624 1760 624
WIRE 1904 624 1824 624
WIRE 1952 624 1952 432
WIRE 1952 624 1904 624
WIRE 640 704 640 592
WIRE 768 704 768 592
WIRE 880 720 880 672
WIRE 640 784 640 768
WIRE 1632 784 1632 624
WIRE 1664 784 1632 784
WIRE 880 816 880 784
WIRE 1824 816 1824 624
WIRE 1824 816 1808 816
WIRE 1328 848 1264 848
WIRE 1392 848 1328 848
WIRE 1504 848 1472 848
WIRE 1584 848 1504 848
WIRE 1664 848 1584 848
WIRE 1584 896 1584 848
WIRE 880 912 880 880
WIRE 1184 912 1184 848
WIRE 1504 912 1504 848
WIRE 1504 992 1504 976
WIRE 1584 992 1584 976
WIRE 1584 992 1504 992
WIRE 880 1008 880 976
WIRE 1584 1008 1584 992
WIRE 880 1104 880 1072
WIRE 880 1184 880 1168
FLAG 1456 -256 Vout
FLAG 768 784 0
FLAG 1472 -160 0
FLAG 1456 432 0
FLAG 2272 480 0
FLAG 2320 480 0
FLAG 1744 896 0
FLAG 1696 896 0
FLAG 1232 416 0
FLAG 2032 -80 0
FLAG 2032 -160 Vbatmin
FLAG 2032 -432 Vbatmin
FLAG 2176 -320 Vbatmin
FLAG 2304 -320 Vbatmin
FLAG 1184 992 0
FLAG 2080 576 0
FLAG 880 1184 0
FLAG 1376 704 0
FLAG 2608 672 0
FLAG 2608 592 SUPP
FLAG 2272 320 SUPP
FLAG 1696 736 SUPP
FLAG 640 784 0
FLAG 1040 336 V3
FLAG 1440 336 Vin
FLAG 624 480 0
FLAG 1584 1088 0
FLAG 1232 624 A
FLAG 1904 624 B
FLAG 1616 -400 0
FLAG 1888 -464 0
FLAG 608 -384 0
FLAG 608 -192 0
FLAG 672 128 0
FLAG 864 128 0
FLAG 1136 -144 0
FLAG 720 -224 Vout_dcdc
FLAG 992 704 0
FLAG 1088 688 0
FLAG 1328 928 0
SYMBOL res 2160 -544 R0
WINDOW 3 37 63 Left 2
SYMATTR Value 5R
SYMATTR InstName R4
SYMBOL sw 2176 -320 R180
WINDOW 0 43 36 Left 2
WINDOW 3 44 66 Left 2
SYMATTR InstName S1
SYMBOL voltage 2304 -416 R0
WINDOW 0 -12 -2 Left 2
WINDOW 3 47 33 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value PULSE(0 5 20m 1n)
SYMBOL res 2016 -544 R0
WINDOW 0 36 42 Left 2
WINDOW 3 36 65 Left 2
SYMATTR InstName R2
SYMATTR Value 20R
SYMBOL boost-converter_output-filter 1568 -256 R0
SYMATTR InstName X3
SYMATTR SpiceLine IC=4.9
SYMBOL res 1200 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 0.068
SYMBOL bi 1456 336 R0
WINDOW 0 39 21 Left 2
WINDOW 3 40 55 Left 2
SYMATTR InstName B1
SYMATTR Value I=limit(0,(V(Vout)/V(V3)*(-I(B2))),0.99)
SYMBOL Opamps\\LT1782 2272 400 R0
SYMATTR InstName U1
SYMBOL res 2080 384 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 220k
SYMBOL Opamps\\LT1782 1696 816 R0
SYMATTR InstName U2
SYMBOL boost-converter_input-filter 1312 336 R0
SYMATTR InstName X5
SYMBOL voltage 2032 -176 R0
WINDOW 0 37 36 Left 2
WINDOW 3 40 63 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 5V
SYMBOL res 1664 608 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 220k
SYMBOL res 1376 832 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 4.7k
SYMBOL res 1568 992 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R13
SYMATTR Value 220k
SYMBOL res 1360 640 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R14
SYMATTR Value 47k
SYMBOL voltage 1184 896 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 39 44 Left 2
WINDOW 3 41 73 Left 2
SYMATTR InstName V7
SYMATTR Value {DAC}
SYMBOL cap 1488 912 R0
SYMATTR InstName C4
SYMATTR Value 1n
SYMBOL cap 1760 496 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 1n
SYMBOL voltage 2080 480 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 1.078V
SYMBOL diode 864 720 R0
SYMATTR InstName D2
SYMATTR Value 1SR156-400
SYMBOL diode 864 816 R0
SYMATTR InstName D3
SYMATTR Value 1SR156-400
SYMBOL diode 864 912 R0
SYMATTR InstName D4
SYMATTR Value 1SR156-400
SYMBOL diode 864 1008 R0
SYMATTR InstName D5
SYMATTR Value 1SR156-400
SYMBOL diode 864 1104 R0
SYMATTR InstName D6
SYMATTR Value 1SR156-400
SYMBOL current 768 784 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value 1A
SYMBOL res 864 464 R0
SYMATTR InstName R15
SYMATTR Value 0.1R
SYMBOL res 1360 608 R0
SYMATTR InstName R16
SYMATTR Value 13k
SYMBOL voltage 2608 576 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 3.3V
SYMBOL diode 656 768 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMATTR Value 1SR156-400
SYMBOL cap 608 416 R0
SYMATTR InstName C9
SYMATTR Value 80µ
SYMBOL voltage 1584 992 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V8
SYMATTR Value 1.078V
SYMBOL res 976 464 R0
SYMATTR InstName R17
SYMATTR Value 4.7k
SYMBOL res 1808 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 82k
SYMBOL schottky 1712 -240 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D8
SYMATTR Value 1N5817
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 1712 -512 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D9
SYMATTR Value 1N5817
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage 1616 -512 R0
WINDOW 0 44 36 Left 2
WINDOW 3 40 90 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 44 62 Left 2
SYMATTR InstName V10
SYMATTR Value 7V
SYMATTR SpiceLine Rser=0.2
SYMBOL cap 1872 -528 R0
SYMATTR InstName C10
SYMATTR Value 25µ
SYMBOL res 880 -112 M0
SYMATTR InstName R1
SYMATTR Value 5.6k
SYMBOL res 832 -224 M0
SYMATTR InstName R5
SYMATTR Value 680k
SYMBOL Opamps\\LT1078 608 -288 R0
SYMATTR InstName U3
SYMBOL voltage 608 -288 M180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 20
SYMBOL voltage 672 32 M0
WINDOW 0 40 46 Left 2
WINDOW 3 43 74 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 1.215V
SYMBOL res 928 -224 M0
SYMATTR InstName R6
SYMATTR Value 68k
SYMBOL res 880 32 M0
SYMATTR InstName R8
SYMATTR Value 14.6k
SYMBOL res 800 32 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R9
SYMATTR Value 14.6k
SYMBOL res 1328 -272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 0.1R
SYMBOL bv 1136 -240 R0
SYMATTR InstName B2
SYMATTR Value V=V(Vout_dcdc)
SYMBOL res 976 608 R0
SYMATTR InstName R19
SYMATTR Value 1k
SYMBOL diode 864 608 R0
SYMATTR InstName D1
SYMATTR Value 1SR156-400
SYMBOL cap 1072 624 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL res 1168 832 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 20k
SYMBOL res 1312 832 R0
SYMATTR InstName R21
SYMATTR Value 6.8k
SYMBOL cap 2320 240 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C2
SYMATTR Value 10n
TEXT 2224 -96 Left 2 ;.tran 200m
TEXT 2352 -352 Left 2 !.model SW SW(Ron=0.001, Vt=1, Vh=1)
TEXT 2144 784 Left 2 !.tran 300m
TEXT 1208 1048 Left 2 !.step param DAC 0.6 1.0 0.1
